<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>D-Rex AI | Evolution v1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        
        :root { --hacker: #00ff41; --premium: #f59e0b; --normal: #6366f1; --bg: #020617; }
        
        body { background: var(--bg); color: #f3f4f6; font-family: 'Plus Jakarta Sans', sans-serif; height: 100dvh; display: flex; overflow: hidden; margin: 0; }

        /* Opening Splash Effect */
        #splash {
            position: fixed; inset: 0; background: #000; z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            animation: fadeOut 1.5s ease forwards; animation-delay: 2s;
        }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }
        
        .loader-text { font-size: 3rem; font-weight: 900; letter-spacing: -2px; animation: glitch 1s infinite; }
        @keyframes glitch { 0% { text-shadow: 2px 0 red; } 50% { text-shadow: -2px 0 blue; } 100% { text-shadow: 2px 0 red; } }

        /* Smooth Glass UI */
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.05); }

        /* Dynamic Sidebar */
        .sidebar { width: 300px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        @media (max-width: 1024px) { .sidebar { position: fixed; transform: translateX(-100%); z-index: 50; height: 100%; } .sidebar.open { transform: translateX(0); } }

        /* Mode Styles */
        .hacker-active { --bg: #000; color: var(--hacker) !important; font-family: 'Fira Code', monospace; }
        .premium-active { background: linear-gradient(to bottom right, #1e1b4b, #431407); }

        /* Preview Panel */
        #previewPanel { transition: all 0.5s ease; border-left: 1px solid rgba(255,255,255,0.1); }
        .code-window { background: #0a0a0a; border-radius: 12px; border: 1px solid #333; height: 300px; overflow: auto; }

        /* Input Area */
        .input-pill { background: rgba(30, 41, 59, 0.7); border: 1px solid rgba(255,255,255,0.1); border-radius: 40px; }
        textarea { max-height: 150px; scrollbar-width: none; }
    </style>
</head>
<body id="mainBody">

    <div id="splash">
        <div class="loader-text text-indigo-500">D-REX AI</div>
        <div class="text-[10px] tracking-[0.5em] text-zinc-500 mt-4 uppercase">Initializing Neural Core</div>
    </div>

    <aside id="sidebar" class="sidebar glass flex flex-col">
        <div class="p-8 border-b border-white/5">
            <h1 class="text-2xl font-black italic tracking-tighter">D-REX<span class="text-indigo-500">.AI</span></h1>
        </div>
        
        <div class="p-6 flex-1 space-y-4">
            <p class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest">Core Protocols</p>
            <button onclick="switchMode('normal')" id="btnNormal" class="w-full p-4 rounded-2xl flex items-center gap-4 bg-indigo-600 text-white shadow-lg transition-all">
                <i class="fas fa-brain"></i> <span class="text-xs font-bold uppercase">Normal Mode</span>
            </button>
            <button onclick="switchMode('premium')" id="btnPremium" class="w-full p-4 rounded-2xl flex items-center gap-4 bg-white/5 hover:bg-white/10 transition-all">
                <i class="fas fa-crown text-amber-500"></i> <span class="text-xs font-bold uppercase">Premium Mode</span>
            </button>
            <button onclick="switchMode('hacker')" id="btnHacker" class="w-full p-4 rounded-2xl flex items-center gap-4 bg-white/5 hover:bg-white/10 transition-all">
                <i class="fas fa-user-secret text-green-500"></i> <span class="text-xs font-bold uppercase">Hacker Mode</span>
            </button>
        </div>

        <div class="p-6 border-t border-white/5">
            <button class="w-full py-4 text-[10px] font-bold uppercase tracking-widest text-zinc-400 hover:text-white transition">History Logs</button>
        </div>
    </aside>

    <main class="flex-1 flex flex-row">
        
        <div class="flex-1 flex flex-col relative">
            <header class="h-20 flex items-center justify-between px-8 glass border-b border-white/5">
                <button onclick="document.getElementById('sidebar').classList.toggle('open')" class="lg:hidden text-white"><i class="fas fa-bars"></i></button>
                <div class="flex items-center gap-3">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    <span id="statusLabel" class="text-[10px] font-bold uppercase tracking-widest text-zinc-400">System: Operational</span>
                </div>
                <div class="flex gap-4">
                    <i class="fas fa-cog text-zinc-500 cursor-pointer"></i>
                </div>
            </header>

            <div id="chatBox" class="flex-1 overflow-y-auto p-8 space-y-6">
                <div class="max-w-2xl mx-auto text-center py-20">
                    <h2 class="text-4xl font-extrabold mb-4 opacity-20">D-REX</h2>
                    <p class="text-zinc-500 text-sm">How can I assist your evolution today?</p>
                </div>
            </div>

            <div id="typing" class="hidden px-10 py-2 text-[10px] font-bold text-indigo-400 uppercase animate-pulse">D-Rex is Thinking...</div>

            <footer class="p-6">
                <div class="max-w-4xl mx-auto input-pill flex items-end p-2 gap-2">
                    <button class="w-12 h-12 flex items-center justify-center text-zinc-500 hover:text-white transition"><i class="fas fa-paperclip"></i></button>
                    <textarea id="userInput" placeholder="Send a message..." rows="1" class="flex-1 bg-transparent border-none outline-none p-3 text-sm resize-none"></textarea>
                    <button onclick="sendMessage()" class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center text-white hover:scale-105 active:scale-95 transition">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                </div>
            </footer>
        </div>

        <div id="previewPanel" class="hidden w-[450px] glass p-6 flex flex-col gap-4">
            <div class="flex justify-between items-center">
                <h3 class="text-xs font-black uppercase text-green-500">Live Code Preview</h3>
                <button onclick="downloadAsZip()" class="text-[10px] bg-green-600/20 text-green-500 px-3 py-1 rounded-full border border-green-500/30">Download .ZIP</button>
            </div>
            <pre id="codeOutput" class="code-window p-4 text-xs text-green-400 font-mono">Waiting for prompt...</pre>
            <div id="webPreview" class="flex-1 bg-white rounded-xl overflow-hidden shadow-2xl">
                <iframe id="previewFrame" class="w-full h-full border-none"></iframe>
            </div>
        </div>
    </main>

    <script>
        let currentMode = 'normal';

        // Fix: Inter Key functionality
        document.getElementById('userInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        function switchMode(mode) {
            currentMode = mode;
            const body = document.getElementById('mainBody');
            const preview = document.getElementById('previewPanel');
            const status = document.getElementById('statusLabel');

            // Reset Styles
            body.className = "";
            preview.classList.add('hidden');
            
            // Apply New Styles
            if(mode === 'hacker') {
                body.classList.add('hacker-active');
                preview.classList.remove('hidden');
                status.innerText = "Protocol: Hacker Access Granted";
            } else if(mode === 'premium') {
                body.classList.add('premium-active');
                status.innerText = "Status: Premium Neural Link";
            } else {
                status.innerText = "System: Operational";
            }

            // Update Buttons
            ['Normal', 'Hacker', 'Premium'].forEach(m => {
                const btn = document.getElementById('btn' + m);
                if(m.toLowerCase() === mode) {
                    btn.className = "w-full p-4 rounded-2xl flex items-center gap-4 bg-indigo-600 text-white shadow-lg transition-all";
                } else {
                    btn.className = "w-full p-4 rounded-2xl flex items-center gap-4 bg-white/5 hover:bg-white/10 transition-all";
                }
            });
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if(!text) return;

            appendMsg('user', text);
            input.value = '';
            input.style.height = 'auto';

            document.getElementById('typing').classList.remove('hidden');

            // Simulate AI Logic
            setTimeout(() => {
                document.getElementById('typing').classList.add('hidden');
                
                if(currentMode === 'hacker') {
                    const mockCode = `<!DOCTYPE html>\n<html>\n<body style="background: #111; color: lime; font-family: sans-serif; text-align: center; padding: 50px;">\n  <h1>D-REX HACKER PROXY</h1>\n  <p>Target: ${text}</p>\n  <button style="background: lime; color: black; border: none; padding: 10px 20px; border-radius: 5px;">Execute Shell</button>\n</body>\n</html>`;
                    
                    document.getElementById('codeOutput').textContent = mockCode;
                    const frame = document.getElementById('previewFrame');
                    frame.srcdoc = mockCode;
                    
                    appendMsg('bot', "Hacker protocol initiated. Code generated and preview updated. You can now download the ZIP package.");
                } else {
                    appendMsg('bot', `Response for: ${text}\nThis is D-Rex AI in ${currentMode} mode.`);
                }
            }, 1000);
        }

        function appendMsg(role, text) {
            const box = document.getElementById('chatBox');
            const div = document.createElement('div');
            div.className = `flex ${role === 'user' ? 'justify-end' : 'justify-start'} animate-in fade-in slide-in-from-bottom-2`;
            
            const bubbleStyle = role === 'user' 
                ? 'bg-indigo-600 text-white rounded-t-2xl rounded-bl-2xl' 
                : 'glass text-zinc-200 rounded-t-2xl rounded-br-2xl';

            div.innerHTML = `<div class="max-w-[80%] p-4 text-sm ${bubbleStyle} shadow-xl">${text}</div>`;
            box.appendChild(div);
            box.scrollTo({ top: box.scrollHeight, behavior: 'smooth' });
        }

        function downloadAsZip() {
            alert("D-REX AI is building your APK/ZIP package... \n(Note: This requires a Backend server to bundle files. In this frontend demo, the files are ready for export.)");
        }
    </script>
</body>
</html>
