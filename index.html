<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>D-Rex AI | Zenith v48</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Fira+Code:wght@400;500&display=swap');
        :root { --bg: #020617; --accent: #6366f1; --card: #0f172a; --premium: #f59e0b; }
        body { background: var(--bg); color: #f1f5f9; font-family: 'Plus Jakarta Sans', sans-serif; height: 100dvh; display: flex; overflow: hidden; margin: 0; }
        
        /* Matrix Background - Updated for Dark/Hacker Mode */
        #matrix { position: fixed; inset: 0; pointer-events: none; opacity: 0; transition: opacity 1.5s; z-index: 0; background: black; }
        .hacker-ui #matrix { opacity: 0.6; } /* Darker Matrix */

        /* UI Containers */
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(25px); border: 1px solid rgba(255,255,255,0.05); }
        .sidebar { width: 300px; border-right: 1px solid rgba(255,255,255,0.05); z-index: 100; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; }
        @media (max-width: 1024px) { .sidebar { position: fixed; inset-y: 0; left: 0; transform: translateX(-100%); } .sidebar.open { transform: translateX(0); box-shadow: 20px 0 60px rgba(0,0,0,0.9); } }

        /* Stylish D Logo */
        .d-logo { font-family: 'Fira Code', monospace; font-size: 2rem; font-weight: 800; color: white; position: relative; display: inline-block; animation: logoFade 1s ease-out; }
        .d-logo::before { content: 'D'; position: absolute; inset: 0; color: var(--accent); filter: blur(10px); animation: logoGlow 2s infinite alternate; }
        
        /* Chat Styling */
        #chatBox { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 24px; z-index: 1; scroll-behavior: smooth; }
        .msg { position: relative; max-width: 85%; animation: msgFade 0.3s ease; display: flex; flex-direction: column; }
        .msg-user { align-self: flex-end; }
        .msg-bot { align-self: flex-start; width: 100%; }
        
        .bubble { padding: 14px 22px; border-radius: 22px; font-size: 0.95rem; line-height: 1.6; position: relative; box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .msg-user .bubble { background: var(--accent); color: white; border-bottom-right-radius: 4px; }
        .msg-bot .bubble { background: var(--card); color: #e2e8f0; border-bottom-left-radius: 4px; border: 1px solid rgba(255,255,255,0.05); }

        /* Added Styles for New Features */
        .premium-border { border: 1px solid var(--premium) !important; }
        .download-btn { background: #22c55e; color: white; padding: 8px 15px; border-radius: 10px; font-size: 12px; display: inline-flex; align-items: center; gap: 6px; margin-top: 10px; }
        
        @keyframes msgFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes logoFade { from { opacity: 0; transform: scale(0.5) rotate(-180deg); } to { opacity: 1; transform: scale(1) rotate(0deg); } }
        @keyframes logoGlow { from { opacity: 0.5; filter: blur(5px); } to { opacity: 1; filter: blur(15px); } }
    </style>
</head>
<body class="hacker-ui"> <canvas id="matrix"></canvas>

    <aside class="sidebar glass p-6">
        <div class="d-logo">D</div>
        <div class="mt-4 mb-8">
            <h2 class="text-xl font-bold">Zenith v48</h2>
            <p class="text-xs text-slate-500">Premium Adaptive AI</p>
        </div>

        <div class="mb-6">
            <label class="text-[10px] uppercase font-black text-slate-400 mb-2 block">Voice Profile</label>
            <select id="voiceSelect" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-xs text-white outline-none"></select>
        </div>

        <div class="p-4 rounded-xl bg-slate-900/50 border border-amber-500/30">
            <label class="text-[10px] uppercase font-black text-amber-500 mb-3 block">API Gateways</label>
            <input type="password" id="imgKey" placeholder="Image Gen API" class="w-full bg-slate-800 border border-slate-700 rounded-md p-2 text-[10px] mb-2 outline-none focus:border-amber-500">
            <input type="password" id="vidKey" placeholder="Video Gen API" class="w-full bg-slate-800 border border-slate-700 rounded-md p-2 text-[10px] outline-none focus:border-amber-500">
        </div>

        <div class="mt-auto pt-6 border-t border-slate-800">
            <button class="flex items-center text-slate-400 hover:text-white transition text-sm">
                <i class="fa-solid fa-terminal mr-3"></i> Hacker Mode Active
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col relative overflow-hidden">
        <div id="chatBox">
            <div class="msg msg-bot">
                <div class="bubble">
                    Systems Initialized. D-Rex AI Zenith v48 is active. 
                    I am ready for image and video generation.
                </div>
            </div>
        </div>

        <div class="p-6 glass border-t border-slate-800">
            <div class="max-w-4xl mx-auto flex gap-4">
                <input type="text" id="userInput" placeholder="Command D-Rex AI..." class="flex-1 bg-slate-900/50 border border-slate-700 rounded-2xl px-6 py-4 outline-none focus:border-indigo-500 transition">
                <button onclick="handleSend()" class="bg-indigo-600 hover:bg-indigo-500 w-14 h-14 rounded-2xl flex items-center justify-center transition">
                    <i class="fa-solid fa-paper-plane text-white"></i>
                </button>
            </div>
            <div class="flex gap-4 mt-3 justify-center">
                <button onclick="generateMedia('image')" class="text-xs text-indigo-400 font-bold"><i class="fa-solid fa-image mr-1"></i> GEN IMAGE</button>
                <button onclick="generateMedia('video')" class="text-xs text-rose-400 font-bold"><i class="fa-solid fa-video mr-1"></i> GEN VIDEO</button>
            </div>
        </div>
    </main>

    <script>
        // --- Dark Matrix Hacker Animation ---
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.onresize = resize; resize();

        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*";
        const fontSize = 16;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawMatrix() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.1)"; // Darker background trail
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#4f46e5"; // Indigo matrix color
            ctx.font = fontSize + "px 'Fira Code'";
            for (let i = 0; i < drops.length; i++) {
                const text = letters[Math.floor(Math.random() * letters.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 50);

        // --- Voice Synthesis Engine ---
        let synth = window.speechSynthesis;
        let voices = [];
        const voiceSelect = document.getElementById('voiceSelect');

        function loadVoices() {
            voices = synth.getVoices();
            voiceSelect.innerHTML = voices.map((v, i) => `<option value="${i}">${v.name} (${v.lang})</option>`).join('');
        }
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        function speak(text) {
            if (synth.speaking) synth.cancel();
            const utter = new SpeechSynthesisUtterance(text);
            utter.voice = voices[voiceSelect.value];
            synth.speak(utter);
        }

        // --- Core Logic ---
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');

        function addMessage(html, type) {
            const div = document.createElement('div');
            div.className = `msg msg-${type}`;
            div.innerHTML = `<div class="bubble">${html}</div>`;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function handleSend() {
            const val = userInput.value.trim();
            if(!val) return;
            addMessage(val, 'user');
            userInput.value = '';
            setTimeout(() => {
                const botReply = "Command received. Processing in Hacker Mode...";
                addMessage(botReply, 'bot');
                speak(botReply);
            }, 600);
        }

        function generateMedia(type) {
            const prompt = userInput.value || "A high-tech digital entity";
            addMessage(`Initializing ${type} engine for prompt: "${prompt}"`, 'bot');
            
            setTimeout(() => {
                if(type === 'image') {
                    const mockUrl = `https://picsum.photos/seed/${Date.now()}/800/600`;
                    const content = `
                        <p>Image generated successfully:</p>
                        <img src="${mockUrl}" class="rounded-xl mt-3 border border-slate-700">
                        <a href="${mockUrl}" download="DRex_Generated_${Date.now()}.jpg" target="_blank" class="download-btn">
                            <i class="fa-solid fa-download"></i> Download Image
                        </a>
                    `;
                    addMessage(content, 'bot');
                    speak("Your image is ready for download.");
                } else {
                    addMessage("Video Generation (Veo) enabled. Processing frames...", 'bot');
                    speak("Video generation started.");
                }
            }, 2500);
        }

        loadVoices();
    </script>
</body>
</html>
